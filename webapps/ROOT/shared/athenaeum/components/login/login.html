<!-- (dbarreto)(2016-03-22) The onSubmit event was moved from the form itself to the click event 
of the button because of an issue with the dehydration of the login component
Reported Issue: https://github.com/angular/angular/issues/6786 -->

<form class="form-horizontal" [ngFormModel]="form">
    
    <div class="errors">
        <p *ngIf="authFailed" class="bg-danger">
            {{ failureMessage }}
            <button type="button" class="close" (click)="closeErrorMessage()">
                <span>&times;</span>
            </button>
        </p>
        <p *ngIf="username.dirty && !username.valid" class="bg-warning">
            A username is required
        </p>
        <p *ngIf="password.dirty && !password.valid" class="bg-warning">
            A password is required
        </p>
    </div>
    
    <div class="form-group">
        <label class="col-sm-2 control-label" for="username">Username</label>
        <div class="col-sm-10">
            <input id="username" class="form-control" type="text" [ngFormControl]="username" (keyup)="captureReturn($event)">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="password">Password</label>
        <div class="col-sm-10">
            <input id="password" class="form-control" type="password" [ngFormControl]="password" (keyup)="captureReturn($event)">    
        </div>
    </div>
    
    <div class="buttons">
        <button type="button" class="btn btn-default" [disabled]="!form.valid" (click)="onSubmit()">Login</button>    
    </div>
    
</form>